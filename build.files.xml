<?xml version="1.0" encoding="UTF-8"?>

<project name="drush-files" default="files:sync">

  <!-- ## Properties -->

  <property name="drush.bin"    value="${project.basedir}/bin/drush" />
  <property name="drush.source" value="" />
  <property name="drush.target" value="@${phing.project.name}.local" />

  <!-- ## Targets -->

  <target name="files:sync"
          description="Synchronises the files from source to target.">
    <fail unless="drush.source"
          message="Please provide a drush.source property." />
    <exec command="${drush.bin} -y rsync ${drush.source}:%files ${drush.target}:%files
                   --mode=avz
                   --delete
                   --force
                   --exclude=cdn
                   --exclude=css
                   --exclude=ctools
                   --exclude=js
                   --exclude=styles
                   --exclude=xmlsitemap"
          passthru="true"
          logoutput="true"
          checkreturn="true" />
  </target>

</project>
