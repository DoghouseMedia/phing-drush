<?xml version="1.0" encoding="UTF-8"?>

<project name="drush-install" default="install:drupal">

  <!-- ## Properties -->

  <property name="drush.bin"      value="${project.basedir}/bin/drush" />
  <property name="drush.cmd"      value="${drush.bin}" />
  <property name="drush.target"   value="@${phing.project.name}.local" />

  <property name="drupal.profile" value="" />
  <property name="drupal.siteuri" value="default" />

  <!-- ## Targets -->

  <target name="install:drupal"
          description="Installs Drupal on a clean database.">
    <fail unless="drupal.profile"
          message="Please provide a drupal.profile property." />
    <fail unless="drupal.siteuri"
          message="Please provide a drupal.siteuri property." />
    <exec command="${drush.cmd} ${drush.target} site-install ${drupal.profile} -y --uri=${drupal.siteuri}"
          passthru="true"
          logoutput="true"
          checkreturn="true" />
  </target>

</project>
